# ============================================================================
# Azure AD / Entra ID Configuration
# Create an app registration at https://portal.azure.com
# ============================================================================
AZURE_CLIENT_ID=00000000-0000-0000-0000-000000000000
AZURE_CLIENT_SECRET=your-client-secret-here
AZURE_TENANT_ID=your-tenant-id-here

# ============================================================================
# Server Configuration
# ============================================================================
MCP_SERVER_PORT=3000
MCP_SERVER_BASE_URL=http://localhost:3000
NODE_ENV=development
LOG_LEVEL=info

# Session encryption key (generate with: openssl rand -base64 48)
SESSION_SECRET=your-session-secret-at-least-32-characters

# ============================================================================
# Redis (required in production, optional in development)
# ============================================================================
# REDIS_URL=redis://localhost:6379

# ============================================================================
# OAuth 2.1 Authorization Server
# ============================================================================

# Persistent signing keys (required in production)
# Generate with: openssl genrsa -out private.pem 2048 && openssl rsa -in private.pem -pubout -out public.pem
# Then base64 encode: cat private.pem | base64 -w0
# OAUTH_SIGNING_KEY_PRIVATE=<base64-encoded PEM or file path>
# OAUTH_SIGNING_KEY_PUBLIC=<base64-encoded PEM or file path>

# Token lifetimes
# OAUTH_ACCESS_TOKEN_LIFETIME_SECS=900
# OAUTH_REFRESH_TOKEN_LIFETIME_SECS=86400
# OAUTH_AUTH_CODE_LIFETIME_SECS=600

# Dynamic Client Registration (needed for Open WebUI)
# OAUTH_ALLOW_DYNAMIC_REGISTRATION=true

# Restrict which redirect URIs are allowed during DCR (comma-separated patterns)
# Supports * as wildcard. If not set, defaults to HTTPS-only in production.
# OAUTH_ALLOWED_REDIRECT_PATTERNS=https://*.example.com/*,http://localhost:*/*

# ============================================================================
# Rate Limiting
# ============================================================================
# RATE_LIMIT_WINDOW_MS=60000
# RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# Timeouts and Limits
# ============================================================================
# GRAPH_API_TIMEOUT_MS=30000
# FILE_PARSE_TIMEOUT_MS=30000
# FILE_PARSE_MAX_OUTPUT_KB=500

# ============================================================================
# Local Development (Docker Compose)
# ============================================================================
# Run scripts/setup-local-dev.sh to generate signing keys and session secret.
# That script will create/update this .env file with:
#   - OAUTH_SIGNING_KEY_PRIVATE (base64-encoded RSA private key)
#   - OAUTH_SIGNING_KEY_PUBLIC  (base64-encoded RSA public key)
#   - SESSION_SECRET            (random 48-byte base64 string)
#
# Then start the stack with: docker compose up --build
#
# Local service URLs:
#   MCP Server:  http://localhost:3000
#   Redis:       redis://localhost:6379
